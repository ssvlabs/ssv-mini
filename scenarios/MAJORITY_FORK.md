## Fork Majority Protection

During the recent incidents with the Pectra fork on Holesky and Sepolia testnets, the majority of the validators used misconfigured execution clients, which caused the network split. During the network revival, those validators had been slashed. The SSV Network’s share in the Ethereum network has been rising, and we understand that we must do our best to contiribute to the integrity of the Ethereum network, to maximize validators’ profits and to avoid any possible risk of slashing. We did a research about how the SSV Network could protect the validators in similar scenarios and implemented the majority fork protection. Given the nature of the DVT technology, all operators in SSV Network are encouraged to run their own Ethereum nodes, preferably using different clients. So in case of a similar client bug, SSV nodes using different clients can compare the data they receive from the clients they are connected to with the data proposed by other SSV nodes. Any difference in attestation source/target epochs or target roots means that the Ethereum nodes the SSV nodes are connected to are on different chains, and SSV nodes’ slashing protection disallows executing such duties.

To make sure the protection works as expected, we’ve implemented an SSV Local Testnet scenario reproducing the incident. We deployed 16 Geth/Lighthouse pairs, where 6 Geth nodes are configured correctly and 10 Geth nodes are misconfigured, so the misconfigured nodes are 62.5% of the network, forming a majority but not being enough for the finalization. We configured 3 SSV nodes to use the correctly configured Geth nodes and 1 SSV node to use the misconfigured one. We scheduled the Pectra fork to be in the epoch 1 and generated a deposit with the default `DEPOSIT_CONTRACT_ADDR`, which caused a network split after the fork. Afterwards, we saw that the SSV nodes indeed stop processing attestations throwing errors related to the wrong root. This confirms that the protection is working and the SSV nodes do not contribute to voting on the wrong chain, avoiding the risk of being slashed.


